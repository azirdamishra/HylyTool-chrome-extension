/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/*!************************!*\
  !*** ./src/content.ts ***!
  \************************/

const blurFilter = "blur(6px)";
let textToBlur = "";
//Search the DOM node for text to blur and blur only the specific text
function processNode(node) {
    if (node.childNodes.length > 0) {
        Array.from(node.childNodes).forEach(processNode);
    }
    if (node.nodeType === Node.TEXT_NODE &&
        node.textContent !== null &&
        node.textContent.trim().length > 0) {
        const parent = node.parentElement;
        if (parent == null)
            return;
        if (parent != null &&
            (parent.tagName === 'SCRIPT' || parent.style.filter === blurFilter)) {
            //Already blurred
            return;
        }
        if (node.textContent.includes(textToBlur)) {
            // Create a span to wrap just the matching text
            const span = document.createElement('span');
            span.style.filter = blurFilter;
            span.style.display = 'inline';
            // Split the text and wrap the matching part
            const parts = node.textContent.split(textToBlur);
            const textNode = document.createTextNode(parts.join(''));
            // Replace the original text node with our new structure
            parent.replaceChild(textNode, node);
            // Insert the blurred spans between the parts
            for (let i = 0; i < parts.length - 1; i++) {
                const blurSpan = span.cloneNode(true);
                blurSpan.textContent = textToBlur;
                parent.insertBefore(blurSpan, textNode);
            }
            console.log("Blurred specific text:", textToBlur);
        }
    }
}
function blurElement(elem) {
    elem.style.filter = blurFilter;
    console.debug("blurred id:" + elem.id + " class:" + elem.className +
        " tag:" + elem.tagName + " text:" + elem.textContent);
}
//Create a MutationObserver to watch for changes to the DOM
const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        if (mutation.addedNodes.length > 0) {
            mutation.addedNodes.forEach(processNode);
        }
        else {
            processNode(mutation.target);
        }
    });
});
//Enable the content script by default
let enabled = true;
const keys = ["enabled", "item"];
console.log("Content script initialized");
chrome.storage.sync.get(keys, (data) => {
    console.log("Storage data received:", data);
    if (data.enabled === false) {
        enabled = false;
        console.log("Extension disabled");
    }
    if (data.item) {
        textToBlur = data.item;
        console.log("Text to blur set to:", textToBlur);
    }
    //Only start observing the DOM if the extension is enabled and there is text to blur
    if (enabled && textToBlur.trim().length > 0) {
        console.log("Starting DOM observation");
        observer.observe(document, {
            attributes: false,
            characterData: true,
            childList: true,
            subtree: true
        });
        //Process the initial page content
        processNode(document);
    }
    else {
        console.log("Not starting observation because:", {
            enabled,
            hasText: textToBlur.trim().length > 0
        });
    }
});

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUUsSUFBSTtZQUNmLE9BQU8sRUFBRSxJQUFJO1NBQ2hCLENBQUM7UUFDRixrQ0FBa0M7UUFDbEMsV0FBVyxDQUFDLFFBQVEsQ0FBQztJQUN6QixDQUFDO1NBQU0sQ0FBQztRQUNKLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLEVBQUU7WUFDN0MsT0FBTztZQUNQLE9BQU8sRUFBRSxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsTUFBTSxHQUFHLENBQUM7U0FDeEMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztBQUNMLENBQUMsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL0h5bHlUb29sLWNocm9tZS1FeHRlbnNpb24vLi9zcmMvY29udGVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgYmx1ckZpbHRlciA9IFwiYmx1cig2cHgpXCJcbmxldCB0ZXh0VG9CbHVyID0gXCJcIlxuXG4vL1NlYXJjaCB0aGUgRE9NIG5vZGUgZm9yIHRleHQgdG8gYmx1ciBhbmQgYmx1ciBvbmx5IHRoZSBzcGVjaWZpYyB0ZXh0XG5mdW5jdGlvbiBwcm9jZXNzTm9kZShub2RlOiBOb2RlKXtcbiAgICBpZihub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCl7XG4gICAgICAgIEFycmF5LmZyb20obm9kZS5jaGlsZE5vZGVzKS5mb3JFYWNoKHByb2Nlc3NOb2RlKVxuICAgIH1cbiAgICBpZihub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBcbiAgICAgICAgbm9kZS50ZXh0Q29udGVudCAhPT0gbnVsbCAmJlxuICAgICAgICBub2RlLnRleHRDb250ZW50LnRyaW0oKS5sZW5ndGggPiAwKXtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50RWxlbWVudFxuICAgICAgICAgICAgaWYocGFyZW50ID09IG51bGwpIHJldHVyblxuICAgICAgICAgICAgaWYocGFyZW50ICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICAocGFyZW50LnRhZ05hbWUgPT09ICdTQ1JJUFQnIHx8IHBhcmVudC5zdHlsZS5maWx0ZXIgPT09IGJsdXJGaWx0ZXIpXG4gICAgICAgICAgICApe1xuICAgICAgICAgICAgICAgIC8vQWxyZWFkeSBibHVycmVkXG4gICAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobm9kZS50ZXh0Q29udGVudC5pbmNsdWRlcyh0ZXh0VG9CbHVyKSl7XG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgc3BhbiB0byB3cmFwIGp1c3QgdGhlIG1hdGNoaW5nIHRleHRcbiAgICAgICAgICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAgICAgICAgIHNwYW4uc3R5bGUuZmlsdGVyID0gYmx1ckZpbHRlcjtcbiAgICAgICAgICAgICAgICBzcGFuLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBTcGxpdCB0aGUgdGV4dCBhbmQgd3JhcCB0aGUgbWF0Y2hpbmcgcGFydFxuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbm9kZS50ZXh0Q29udGVudC5zcGxpdCh0ZXh0VG9CbHVyKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBhcnRzLmpvaW4oJycpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBvcmlnaW5hbCB0ZXh0IG5vZGUgd2l0aCBvdXIgbmV3IHN0cnVjdHVyZVxuICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQodGV4dE5vZGUsIG5vZGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYmx1cnJlZCBzcGFucyBiZXR3ZWVuIHRoZSBwYXJ0c1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJsdXJTcGFuID0gc3Bhbi5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJsdXJTcGFuLnRleHRDb250ZW50ID0gdGV4dFRvQmx1cjtcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShibHVyU3BhbiwgdGV4dE5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkJsdXJyZWQgc3BlY2lmaWMgdGV4dDpcIiwgdGV4dFRvQmx1cik7XG4gICAgICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBibHVyRWxlbWVudChlbGVtOiBIVE1MRWxlbWVudCkge1xuICAgIGVsZW0uc3R5bGUuZmlsdGVyID0gYmx1ckZpbHRlclxuICAgIGNvbnNvbGUuZGVidWcoXCJibHVycmVkIGlkOlwiICsgZWxlbS5pZCArIFwiIGNsYXNzOlwiICsgZWxlbS5jbGFzc05hbWUgK1xuICAgICAgICBcIiB0YWc6XCIgKyBlbGVtLnRhZ05hbWUgKyBcIiB0ZXh0OlwiICsgZWxlbS50ZXh0Q29udGVudClcbn1cblxuLy9DcmVhdGUgYSBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciBjaGFuZ2VzIHRvIHRoZSBET01cbmNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuICAgIG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xuICAgICAgICBpZihtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgbXV0YXRpb24uYWRkZWROb2Rlcy5mb3JFYWNoKHByb2Nlc3NOb2RlKVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHByb2Nlc3NOb2RlKG11dGF0aW9uLnRhcmdldClcbiAgICAgICAgfVxuICAgIH0pXG59KVxuXG4vL0VuYWJsZSB0aGUgY29udGVudCBzY3JpcHQgYnkgZGVmYXVsdFxubGV0IGVuYWJsZWQgPSB0cnVlXG5jb25zdCBrZXlzID0gW1wiZW5hYmxlZFwiLCBcIml0ZW1cIl1cblxuY29uc29sZS5sb2coXCJDb250ZW50IHNjcmlwdCBpbml0aWFsaXplZFwiKTtcblxuY2hyb21lLnN0b3JhZ2Uuc3luYy5nZXQoa2V5cywgKGRhdGEpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIlN0b3JhZ2UgZGF0YSByZWNlaXZlZDpcIiwgZGF0YSk7XG4gICAgXG4gICAgaWYoZGF0YS5lbmFibGVkID09PSBmYWxzZSl7XG4gICAgICAgIGVuYWJsZWQgPSBmYWxzZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkV4dGVuc2lvbiBkaXNhYmxlZFwiKTtcbiAgICB9XG4gICAgaWYoZGF0YS5pdGVtKXtcbiAgICAgICAgdGV4dFRvQmx1ciA9IGRhdGEuaXRlbVxuICAgICAgICBjb25zb2xlLmxvZyhcIlRleHQgdG8gYmx1ciBzZXQgdG86XCIsIHRleHRUb0JsdXIpO1xuICAgIH1cblxuICAgIC8vT25seSBzdGFydCBvYnNlcnZpbmcgdGhlIERPTSBpZiB0aGUgZXh0ZW5zaW9uIGlzIGVuYWJsZWQgYW5kIHRoZXJlIGlzIHRleHQgdG8gYmx1clxuICAgIGlmKGVuYWJsZWQgJiYgdGV4dFRvQmx1ci50cmltKCkubGVuZ3RoID4gMCl7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RhcnRpbmcgRE9NIG9ic2VydmF0aW9uXCIpO1xuICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIC8vUHJvY2VzcyB0aGUgaW5pdGlhbCBwYWdlIGNvbnRlbnRcbiAgICAgICAgcHJvY2Vzc05vZGUoZG9jdW1lbnQpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJOb3Qgc3RhcnRpbmcgb2JzZXJ2YXRpb24gYmVjYXVzZTpcIiwge1xuICAgICAgICAgICAgZW5hYmxlZCxcbiAgICAgICAgICAgIGhhc1RleHQ6IHRleHRUb0JsdXIudHJpbSgpLmxlbmd0aCA+IDBcbiAgICAgICAgfSk7XG4gICAgfVxufSkiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=